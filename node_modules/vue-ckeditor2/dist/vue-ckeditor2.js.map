{"version":3,"file":"vue-ckeditor2.js","sources":["../src/Ckeditor.vue"],"sourcesContent":["<template>\n  <div class=\"ckeditor\">\n    <textarea\n      :name=\"name\"\n      :id=\"id\"\n      :value=\"value\"\n      :types=\"types\"\n      :config=\"config\">\n    </textarea>\n  </div>\n</template>\n\n<script>\nlet inc = new Date().getTime()\n\nexport default {\n  name: 'vue-ckeditor',\n  props: {\n    name: {\n      type: String,\n      default: () => `editor-${++inc}`\n    },\n    value: {\n      type: String\n    },\n    id: {\n      type: String,\n      default: () => `editor-${inc}`\n    },\n    types: {\n      type: String,\n      default: () => `classic`\n    },\n    config: {\n      type: Object,\n      default: () => {}\n    }\n  },\n  data () {\n    return { destroyed: false }\n  },\n  computed: {\n    instance () {\n      return CKEDITOR.instances[this.id]\n    }\n  },\n  watch: {\n    value (val) {\n      try {\n        if (this.instance) {\n          this.update(val)\n        }\n      } catch (e) {}\n    }\n  },\n  mounted () {\n    this.create()\n  },\n  beforeDestroy () {\n    this.destroy()\n  },\n  methods: {\n    create () {\n      if (typeof CKEDITOR === 'undefined') {\n        console.log('CKEDITOR is missing (http://ckeditor.com/)')\n      } else {\n        if (this.types === 'inline') {\n            CKEDITOR.inline(this.id, this.config)\n        } else {\n            CKEDITOR.replace(this.id, this.config)\n        }\n\n        this.instance.setData(this.value)\n        this.instance.on('instanceReady', () => {\n          this.instance.setData(this.value)\n        })\n        this.instance.on('change', this.onChange)\n        this.instance.on('blur', this.onBlur)\n        this.instance.on('focus', this.onFocus)\n      }\n    },\n    update (val) {\n      let html = this.instance.getData()\n      if (html !== val) {\n        this.instance.setData(val, { internal: false })\n      }\n    },\n    destroy () {\n      if (!this.destroyed) {\n        this.instance.focusManager.blur(true)\n        this.instance.removeAllListeners()\n        this.instance.destroy()\n        this.destroyed = true\n      }\n    },\n    onChange () {\n      let html = this.instance.getData()\n      if (html !== this.value) {\n        this.$emit('input', html)\n      }\n    },\n    onBlur () {\n      this.$emit('blur', this.instance)\n    },\n    onFocus () {\n      this.$emit('focus', this.instance)\n    }\n  }\n}\n</script>\n<style>\n.ckeditor::after {\n  content: \"\";\n  display: table;\n  clear: both;\n}\n</style>\n"],"names":["let","this"],"mappings":"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"}